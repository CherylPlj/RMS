-- paverify, check, and edit hahah
-- Roles Table
CREATE TABLE Roles (
    RoleID INT PRIMARY KEY IDENTITY(1,1),
    RoleName NVARCHAR(50) NOT NULL
);

-- Users Table
CREATE TABLE Users (
    UserID INT PRIMARY KEY IDENTITY(1,1),
    Username NVARCHAR(50) NOT NULL UNIQUE,
    PasswordHash NVARCHAR(255) NOT NULL,
    RoleID INT,
    FOREIGN KEY (RoleID) REFERENCES Roles(RoleID)
);

-- Properties Table
CREATE TABLE Properties (
    PropertyID INT PRIMARY KEY IDENTITY(1,1),
    Address NVARCHAR(255) NOT NULL,
    OwnerID INT,
    FOREIGN KEY (OwnerID) REFERENCES Users(UserID)
);

-- Tenants Table
CREATE TABLE Tenants (
    TenantID INT PRIMARY KEY IDENTITY(1,1),
    FirstName NVARCHAR(50) NOT NULL,
    LastName NVARCHAR(50) NOT NULL,
    Email NVARCHAR(100) NOT NULL UNIQUE,
    Phone NVARCHAR(15)
);

-- Leases Table
CREATE TABLE Leases (
    LeaseID INT PRIMARY KEY IDENTITY(1,1),
    PropertyID INT,
    TenantID INT,
    StartDate DATE NOT NULL,
    EndDate DATE NOT NULL,
    RentAmount DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (PropertyID) REFERENCES Properties(PropertyID),
    FOREIGN KEY (TenantID) REFERENCES Tenants(TenantID)
);

-- Payments Table
CREATE TABLE Payments (
    PaymentID INT PRIMARY KEY IDENTITY(1,1),
    LeaseID INT,
    PaymentDate DATE NOT NULL,
    Amount DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (LeaseID) REFERENCES Leases(LeaseID)
);

-- MaintenanceRequests Table
CREATE TABLE MaintenanceRequests (
    RequestID INT PRIMARY KEY IDENTITY(1,1),
    PropertyID INT,
    TenantID INT,
    RequestDate DATE NOT NULL,
    Description NVARCHAR(255) NOT NULL,
    Status NVARCHAR(50) NOT NULL,
    FOREIGN KEY (PropertyID) REFERENCES Properties(PropertyID),
    FOREIGN KEY (TenantID) REFERENCES Tenants(TenantID)
);
